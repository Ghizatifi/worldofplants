{"version":3,"sources":["./src/app/pages/order/order.page.html","./src/app/pages/order/order.module.ts","./src/app/pages/order/order.page.scss","./src/app/pages/order/order.page.ts"],"names":[],"mappings":"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","file":"pages-order-order-module-es2015.js","sourcesContent":["module.exports = \"<app-header2 [pageName]=\\\"'#'+order_id\\\"></app-header2>\\n<ion-content class=\\\"ion-padding\\\" *ngIf=\\\"orderInfo\\\">\\n  <ion-img src=\\\"assets/images/map.png\\\"></ion-img>\\n\\n  <div class=\\\"status\\\">\\n    <ion-icon class=\\\"green_filter\\\" [src]=\\\"assets.orders\\\"></ion-icon>\\n    <div class=\\\"dotted\\\" style=\\\"width: 100%;\\\">{{\\\"order_status\\\" | translate}}{{orderInfo.statusCode==0? \\\"caneled\\\":\\\"\\\" | translate}}</div>\\n  </div>\\n\\n  \\n  <div class=\\\"status_container\\\">\\n    <div class=\\\"status_content\\\" *ngFor=\\\"let status of  order_status\\\" >\\n      <ion-icon style=\\\"font-size: 25px;\\\" *ngIf=\\\"status.id>orderInfo.statusCode\\\" [src]=\\\"assets.status_grey\\\"></ion-icon>\\n      <ion-icon style=\\\"font-size: 25px;\\\" *ngIf=\\\"status.id<=orderInfo.statusCode\\\" [src]=\\\"assets.status\\\"></ion-icon>\\n      <p class=\\\"status_p\\\" [ngClass]=\\\"status.id>orderInfo.statusCode?'grey': 'black'\\\">{{status.name_ar}}</p>\\n    </div>\\n  </div>\\n\\n\\n  <div class=\\\"status\\\">\\n    <ion-icon class=\\\"green_filter\\\" [src]=\\\"assets.orders\\\"></ion-icon>\\n    <div class=\\\"dotted\\\" style=\\\"width: 100%;\\\"> {{\\\"products\\\" | translate}}</div>\\n  </div>\\n\\n  <div class=\\\"cart-item bordered\\\" style=\\\"margin: 20px;position: relative;\\\" *ngFor=\\\"let item of orderInfo.items\\\">\\n   \\n    <ion-grid style=\\\"padding-bottom: 0;\\\">\\n      <ion-row class=\\\"main-row\\\">\\n        <ion-col size=\\\"4\\\" style=\\\"padding-bottom: 0;\\\">\\n          <img style=\\\"aspect-ratio: 1;object-fit: cover;\\\" [src]=\\\"item.product.image ? fetch.url_storage+ item.product.image : 'assets/images/logo.png'\\\" (click)=\\\"openProduct(item)\\\">\\n        </ion-col>\\n        <ion-col size=\\\"8\\\" class=\\\"grid-col\\\">\\n          <ion-grid>\\n            <ion-row class=\\\"item-title\\\" style=\\\"display: flex; align-items: center; justify-content: space-between;\\\" (click)=\\\"openProduct(item)\\\">\\n              <p style=\\\"font-weight: 700;\\\" >\\n                {{config.translateWord(item.product) | slice:0:12}}\\n                <span *ngIf=\\\"config.translateWord(product).length>12\\\">...</span>\\n              </p>\\n              <span style=\\\"color: var(--ion-color-secondary);font-size: 15px; font-weight: bold;\\\">\\n                {{item.price}} JD \\n              </span>\\n            </ion-row>\\n            <div style=\\\"display: flex; align-items: center; justify-content: space-between;\\\">\\n            <span style=\\\"color: var(--ion-color-primary);font-weight: bold;\\\">\\n                {{item.quantity}}X\\n              </span>\\n        </div>\\n        \\n        </ion-grid>\\n        </ion-col>\\n      </ion-row>\\n      <div >\\n      </div>\\n    </ion-grid>\\n  </div>  \\n\\n\\n  <ion-button *ngIf=\\\"orderInfo.statusCode==1  || orderInfo.statusCode==2 ||  orderInfo.statusCode==3\\\" (click)=\\\"cancelOrder()\\\" fill=\\\"clear\\\" color=\\\"secondary\\\" style=\\\"--background:none ; --color: var(--ion-color-secondary)\\\" style=\\\"display: block; margin: \\n  auto;\\\" > {{\\\"cancelOrder\\\" | translate}}</ion-button>\\n</ion-content>\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { OrderPage } from './order.page';\nimport { TranslateModule, TranslateLoader } from '@ngx-translate/core';\nimport { SharedModule } from 'src/app/modules/shared/shared.module';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: OrderPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    SharedModule,\n    RouterModule.forChild(routes),\n    TranslateModule.forChild()\n  ],\n  declarations: [OrderPage]\n})\nexport class OrderPageModule {}\n","module.exports = \"* {\\n  z-index: 1;\\n}\\n\\n.green_filter {\\n  -webkit-filter: invert(25%) sepia(40%) saturate(2065%) hue-rotate(70deg) brightness(54%) contrast(95%);\\n          filter: invert(25%) sepia(40%) saturate(2065%) hue-rotate(70deg) brightness(54%) contrast(95%);\\n}\\n\\n.status {\\n  padding: 10px;\\n  display: -webkit-box;\\n  display: flex;\\n  margin-top: 20px;\\n  font-size: 20px;\\n  -webkit-box-align: center;\\n          align-items: center;\\n  color: green;\\n  font-weight: bold;\\n}\\n\\n.status .dotted {\\n  width: 100%;\\n  margin: 0 10px;\\n  border-bottom: 1px green dotted;\\n}\\n\\n.status_p {\\n  margin: 0 10px;\\n  font-size: 20px;\\n}\\n\\n.status_container {\\n  position: relative;\\n}\\n\\n.status_content {\\n  display: -webkit-box;\\n  display: flex;\\n  margin-bottom: 20px;\\n}\\n\\n.line {\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  top: 0;\\n  z-index: -1;\\n  right: 12px;\\n  border-right: 2px var(--ion-color-secondary) dotted;\\n}\\n\\n.grey {\\n  color: grey;\\n}\\n\\n.black {\\n  color: black;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9naGl6bGFuZS9Eb3dubG9hZHMvcGxhbnRzX2FwcF9hbmRyb2lkL3dvcmxkb2ZwbGFudHMvc3JjL2FwcC9wYWdlcy9vcmRlci9vcmRlci5wYWdlLnNjc3MiLCJzcmMvYXBwL3BhZ2VzL29yZGVyL29yZGVyLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLFVBQUE7QUNDSjs7QURDQTtFQUVJLHNHQUFBO1VBQUEsOEZBQUE7QUNDSjs7QURFQTtFQUNJLGFBQUE7RUFDQSxvQkFBQTtFQUFBLGFBQUE7RUFDQSxnQkFBQTtFQUNBLGVBQUE7RUFDQSx5QkFBQTtVQUFBLG1CQUFBO0VBQ0EsWUFBQTtFQUNBLGlCQUFBO0FDQ0o7O0FEQUk7RUFDSSxXQUFBO0VBQ0EsY0FBQTtFQUNBLCtCQUFBO0FDRVI7O0FEQ0E7RUFDSSxjQUFBO0VBQ0EsZUFBQTtBQ0VKOztBREFBO0VBQ0ksa0JBQUE7QUNHSjs7QUREQTtFQUNJLG9CQUFBO0VBQUEsYUFBQTtFQUNBLG1CQUFBO0FDSUo7O0FERkE7RUFDSSxrQkFBQTtFQUNBLFdBQUE7RUFDQSxZQUFBO0VBQ0EsTUFBQTtFQUNBLFdBQUE7RUFDQSxXQUFBO0VBQ0EsbURBQUE7QUNLSjs7QURIQTtFQUNJLFdBQUE7QUNNSjs7QURKQTtFQUNJLFlBQUE7QUNPSiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL29yZGVyL29yZGVyLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIip7XG4gICAgei1pbmRleDogMTtcbn1cbi5ncmVlbl9maWx0ZXJ7XG4gICAgICAgIC8vIGZpbHRlciA6aW52ZXJ0KDMzJSkgc2VwaWEoNzMlKSBzYXR1cmF0ZSg3NjUlKSBodWUtcm90YXRlKDYzZGVnKSBicmlnaHRuZXNzKDk1JSkgY29udHJhc3QoOTIlKTtcbiAgICBmaWx0ZXI6aW52ZXJ0KDI1JSkgc2VwaWEoNDAlKSBzYXR1cmF0ZSgyMDY1JSkgaHVlLXJvdGF0ZSg3MGRlZykgYnJpZ2h0bmVzcyg1NCUpIGNvbnRyYXN0KDk1JSk7XG4gICAgICBcbn1cbi5zdGF0dXN7XG4gICAgcGFkZGluZzogMTBweDtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIG1hcmdpbi10b3A6IDIwcHg7XG4gICAgZm9udC1zaXplOiAyMHB4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgY29sb3I6IGdyZWVuO1xuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgIC5kb3R0ZWR7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBtYXJnaW46IDAgMTBweDtcbiAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IGdyZWVuIGRvdHRlZDtcbiAgICB9XG59XG4uc3RhdHVzX3B7XG4gICAgbWFyZ2luOiAwIDEwcHg7XG4gICAgZm9udC1zaXplOiAyMHB4O1xufVxuLnN0YXR1c19jb250YWluZXJ7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xufVxuLnN0YXR1c19jb250ZW50e1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgbWFyZ2luLWJvdHRvbTogMjBweDtcbn1cbi5saW5le1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gICAgdG9wOiAwO1xuICAgIHotaW5kZXg6IC0xO1xuICAgIHJpZ2h0OiAxMnB4O1xuICAgIGJvcmRlci1yaWdodDogMnB4IHZhcigtLWlvbi1jb2xvci1zZWNvbmRhcnkpIGRvdHRlZDtcbn1cbi5ncmV5e1xuICAgIGNvbG9yOiBncmV5O1xufVxuLmJsYWNre1xuICAgIGNvbG9yOiBibGFjaztcbn0iLCIqIHtcbiAgei1pbmRleDogMTtcbn1cblxuLmdyZWVuX2ZpbHRlciB7XG4gIGZpbHRlcjogaW52ZXJ0KDI1JSkgc2VwaWEoNDAlKSBzYXR1cmF0ZSgyMDY1JSkgaHVlLXJvdGF0ZSg3MGRlZykgYnJpZ2h0bmVzcyg1NCUpIGNvbnRyYXN0KDk1JSk7XG59XG5cbi5zdGF0dXMge1xuICBwYWRkaW5nOiAxMHB4O1xuICBkaXNwbGF5OiBmbGV4O1xuICBtYXJnaW4tdG9wOiAyMHB4O1xuICBmb250LXNpemU6IDIwcHg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGNvbG9yOiBncmVlbjtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG59XG4uc3RhdHVzIC5kb3R0ZWQge1xuICB3aWR0aDogMTAwJTtcbiAgbWFyZ2luOiAwIDEwcHg7XG4gIGJvcmRlci1ib3R0b206IDFweCBncmVlbiBkb3R0ZWQ7XG59XG5cbi5zdGF0dXNfcCB7XG4gIG1hcmdpbjogMCAxMHB4O1xuICBmb250LXNpemU6IDIwcHg7XG59XG5cbi5zdGF0dXNfY29udGFpbmVyIHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xufVxuXG4uc3RhdHVzX2NvbnRlbnQge1xuICBkaXNwbGF5OiBmbGV4O1xuICBtYXJnaW4tYm90dG9tOiAyMHB4O1xufVxuXG4ubGluZSB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwJTtcbiAgdG9wOiAwO1xuICB6LWluZGV4OiAtMTtcbiAgcmlnaHQ6IDEycHg7XG4gIGJvcmRlci1yaWdodDogMnB4IHZhcigtLWlvbi1jb2xvci1zZWNvbmRhcnkpIGRvdHRlZDtcbn1cblxuLmdyZXkge1xuICBjb2xvcjogZ3JleTtcbn1cblxuLmJsYWNrIHtcbiAgY29sb3I6IGJsYWNrO1xufSJdfQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { ConfigService } from '../../services/config.service';\nimport { FetchService } from '../../services/fetch.service';\nimport { ActivatedRoute } from '@angular/router';\nimport { HttpHeaders } from '@angular/common/http';\nimport { ModalController, PopoverController, NavController } from '@ionic/angular';\nimport { RatePage } from '../rate/rate.page';\nimport { Assets } from 'src/app/constants/constants';\nimport { UserService } from 'src/app/services/user.service';\n\n@Component({\n  selector: 'app-order',\n  templateUrl: './order.page.html',\n  styleUrls: ['./order.page.scss'],\n})\nexport class OrderPage implements OnInit {\n  assets = Assets\n  public order_id:string;\n  public orderInfo:any;\n  order_status = [\n    {\n      id: 1 ,\n      name_ar: \"تم استلام الطلب\" ,\n      name_en: \"Order Active \" ,\n    },\n    {\n      id: 2,\n      name_ar: \"استلم المندوب الطلب\",\n      name_en: \"Deliver Got the order\" ,\n    },{\n      id: 3 ,\n      name_ar: \"الطلب في الطريق اليك\" ,\n      name_en: \"Order On The Way\" ,\n    },\n    {\n      id: 4 ,\n      name_ar: \"تم  التوصيل\" ,\n      name_en: \"Order Completed \" ,\n    }\n  ]\n  constructor(\n    private route: ActivatedRoute,\n    public fetch: FetchService,\n    public config: ConfigService ,\n    public modalCtrl:ModalController ,\n    private popoverController:PopoverController ,\n    public userService: UserService ,\n    private navCtrl: NavController,\n  ) { \n    console.log(\"USER \",this.config.role_id)\n    console.log(\"user id  \",this.config.user)\n  }\n\n  ngOnInit() {\n    this.order_id = this.route.snapshot.paramMap.get(\"id\");\n    this.getOrderInfo();\n  }\n\n  getOrderInfo() {\n    let headers = new HttpHeaders().set(\"Authorization\", \"Bearer \" + this.config.token);\n    this.fetch.get('auth/order/track/'+this.order_id, headers)\n    .then((res:any)=> {\n      console.log(\"res \",res)\n      let data\n      if(res.status){\n        data = res.data\n      }else{\n        this.fetch.errorToast()\n        return\n      }\n      console.log(\"my ordes \",data)\n\n      this.orderInfo = data;\n    },err=>{console.log(\"ERROR \",err)})\n  }\n\n\n  public total() {\n    let price :any = 0;\n    for (let index in this.orderInfo.items) {\n      price+=this.orderInfo.items[index].quantity*this.orderInfo.items[index].price;\n    }\n    return price.toFixed(1);\n  }\n\n  public discount() {\n    if (this.orderInfo.coupon)\n      if (this.orderInfo.coupon.value) return this.orderInfo.coupon.value\n      else return ((this.total()*this.orderInfo.coupon.discount)/100).toFixed(1);\n  }\n\n  public all() {\n    return ((this.total()- (this.discount() ? this.discount() : 0)) + (this.orderInfo.d_price ? this.orderInfo.d_price : 0)).toFixed(1)\n    ;\n  }\n\n  async order_done(){\n    let headers = new HttpHeaders().set(\"Authorization\", \"Bearer \" + this.config.token);\n    this.fetch.post('auth/order/complete/'+this.order_id,{}, headers)\n    .subscribe((res:any)=> {\n      console.log(\"res \",res)\n      let data\n      if(res.status){\n        data = res.data\n        this.check_rate()\n      }else{\n        this.fetch.errorToast()\n        return\n      }\n      console.log(\"my ordes \",data)\n\n      this.orderInfo = data;\n    },err=>{console.log(\"ERROR \",err)})\n\n  }\n  \n\n  goToMap(){\n    \n    this.navCtrl.navigateForward(['driver-map'] , {queryParams : this.orderInfo})\n  }\n\n\n  async check_rate(){\n    let headers = new HttpHeaders().set(\"Authorization\", \"Bearer \" + this.config.token);\n    this.fetch.get('store/'+this.orderInfo.store_id+'/rate/'+this.order_id, headers)\n    .then((res:any)=> {\n      console.log(\"res \",res)\n      let data\n      if(res.status){\n\n        data = res.data\n      }else{\n        this.ratePop()\n        return\n      }\n      console.log(\"my ordes \",data)\n\n      this.orderInfo = data;\n    },err=>{\n      console.log(\"ERROR \",err);\n    this.ratePop()})\n  }\n\n  async ratePop(){\n    let modal = this.popoverController.create({\n      component:RatePage , \n      componentProps :{\n        store_name:'Ali Store' ,\n        img:'assets/imgs/logo.png',\n      }\n    });\n    \n    (await modal).onDidDismiss().then((data:any)=>{\n      console.log('data ',data.data)\n      \n      if(data.data &&  data.data.comment && data.data.stars){\n        this.rate(data.data.stars , data.data.comment)\n      }\n      else{\n        this.goHome()\n      }\n    })\n\n    return (await modal).present();\n  }\n\n  async rate(stars , comment){\n    let payload = {\n      rate:stars, comment:comment\n    }\n    let headers = new HttpHeaders().set(\"Authorization\", \"Bearer \" + this.config.token);\n    this.fetch.post('store/'+1+'/rate/add', payload, headers)//1 is the store id\n    .subscribe((res:any)=> {\n      this.fetch.errorToast(\"تم التقييم بنجاح\")\n      console.log(\"res \",res)\n      let data\n      if(res.status){\n        data = res.data\n        this.goHome()\n      }else{\n        this.goHome()\n        //this.fetch.errorToast()\n        //return\n      }\n      console.log(\"my ordes \",data)\n\n      this.orderInfo = data;\n    },err=>{\n      console.log(\"ERROR \",err);\n    this.ratePop()})\n  }\n\n  goHome(){\n    this.navCtrl.navigateRoot(\"stores\")\n  }\n\n  cancelOrder(){\n    this.navCtrl.navigateForward([\"cancel\"] , {queryParams : {order_id : this.order_id}})\n  }\n}\n"],"sourceRoot":""}